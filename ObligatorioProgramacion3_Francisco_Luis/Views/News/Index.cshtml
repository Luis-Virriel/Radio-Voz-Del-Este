@model IEnumerable<ObligatorioProgramacion3_Francisco_Luis.Models.News>

@{
    ViewBag.Title = "Noticias";
    var permissions = Session["Permissions"] as List<string> ?? new List<string>();
}

<h2>Noticias</h2>

@if (permissions.Contains("CreateNews"))
{
    <p>
        @Html.ActionLink("Crear Nueva", "Create", null, new { @class = "btn btn-primary" })
    </p>
}

<table class="table table-striped">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.First().Title)</th>
            <th>@Html.DisplayNameFor(model => model.First().Content)</th>
            <th>@Html.DisplayNameFor(model => model.First().PublishDate)</th>
            <th>@Html.DisplayNameFor(model => model.First().ImageURL)</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(m => item.Title)</td>
                <td>@Html.DisplayFor(m => item.Content)</td>
                <td>@Html.DisplayFor(m => item.PublishDate)</td>
                <td>
                    @if (!string.IsNullOrEmpty(item.ImageURL))
                    {
                        <img src="@Url.Content(item.ImageURL)" alt="Imagen noticia" style="max-height: 50px;" />
                    }
                </td>
                <td>
                    @if (permissions.Contains("EditNews"))
                    {
                        @Html.ActionLink("Editar", "Edit", new { id = item.ID }) <text> | </text>
                    }
                    @if (permissions.Contains("ViewNews"))
                    {
                        @Html.ActionLink("Detalles", "Details", new { id = item.ID }) <text> | </text>
                    }
                    @if (permissions.Contains("DeleteNews"))
                    {
                        @Html.ActionLink("Eliminar", "Delete", new { id = item.ID })
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
