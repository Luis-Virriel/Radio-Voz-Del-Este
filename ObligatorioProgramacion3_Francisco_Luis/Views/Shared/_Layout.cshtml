<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" type="image/x-icon" href="~/Assets/favicon.ico" />
	<link rel="stylesheet" href="~/Content/Index.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/Content/Curency.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/Content/Wather.css" asp-append-version="true" />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
	<title>@ViewBag.Title - Voz del Este</title>
	@Styles.Render("~/Content/Site.css")
	@Scripts.Render("~/bundles/modernizr")

	<style>
		/* Reset y configuración base */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			color: #333;
		}

		/* Navbar mejorado */
		.navbar {
			background: linear-gradient(135deg, #1e3c72, #2a5298) !important;
			padding: 1.5rem 0 !important;
			box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
			border-bottom: none !important;
			backdrop-filter: blur(20px);
			position: relative;
			overflow: hidden;
		}

			.navbar::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(255, 255, 255, 0.05) 100%);
				pointer-events: none;
			}

			.navbar .container-fluid {
				max-width: 1400px;
				margin: 0 auto;
				padding: 0 2rem;
				position: relative;
				z-index: 2;
				display: flex;
				justify-content: space-between;
				align-items: center;
				gap: 2rem;
			}

		/* Secciones del navbar */
		.navbar-section {
			display: flex;
			align-items: center;
		}

		.navbar-left {
			flex: 0 0 auto;
		}

		.navbar-center-left {
			flex: 0 0 auto;
			margin-left: auto;
			margin-right: 1rem;
		}

		.navbar-center-right {
			flex: 0 0 auto;
			margin-right: 1rem;
		}

		.navbar-right {
			flex: 0 0 auto;
			margin-left: auto;
		}

		/* Cuando solo hay login, centrar a la derecha */
		.navbar .container-fluid:has(.navbar-left):has(.navbar-right):not(:has(.navbar-center-left)) .navbar-right {
			margin-left: auto;
		}

		/* Logo y marca */
		.navbar-left {
			display: flex;
			align-items: center;
		}

		.navbar img {
			filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.4));
			animation: pulse 3s infinite;
			margin-right: 1rem !important;
			height: 50px !important;
			transition: all 0.4s ease;
		}

			.navbar img:hover {
				transform: rotate(360deg) scale(1.15);
				filter: drop-shadow(0 0 25px rgba(116, 185, 255, 0.8));
			}

		.navbar-brand {
			color: #ffffff !important;
			font-size: 2rem !important;
			font-weight: 300 !important;
			text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
			text-decoration: none !important;
			transition: all 0.4s ease;
			letter-spacing: 1px;
			white-space: nowrap;
		}

			.navbar-brand:hover {
				color: #74b9ff !important;
				transform: translateY(-3px);
				text-shadow: 2px 2px 12px rgba(116, 185, 255, 0.6);
			}

		@@keyframes pulse {
			0%, 100% {
				transform: scale(1);
				filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.4));
			}

			50% {
				transform: scale(1.05);
				filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.6));
			}
		}

		/* Botón hamburguesa */
		.navbar-toggler {
			border: 2px solid rgba(255, 255, 255, 0.4);
			border-radius: 8px;
			padding: 0.5rem;
		}

			.navbar-toggler:focus {
				box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
			}

		/* Navegación */
		.navbar-nav {
			align-items: center;
			gap: 1rem;
		}

		.navbar-text {
			background: rgba(255, 255, 255, 0.15) !important;
			padding: 0.6rem 1.2rem !important;
			border-radius: 25px !important;
			backdrop-filter: blur(15px);
			border: 1px solid rgba(255, 255, 255, 0.3);
			transition: all 0.3s ease;
			font-size: 0.9rem !important;
			font-weight: 500 !important;
			color: rgba(255, 255, 255, 0.95) !important;
			white-space: nowrap;
			max-width: 200px;
			overflow: hidden;
			text-overflow: ellipsis;
		}

			.navbar-text:hover {
				background: rgba(255, 255, 255, 0.25) !important;
				transform: translateY(-2px);
				box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
			}

		/* Dropdown estilizado */
		.nav-dropdown {
			background: rgba(30, 60, 114, 0.95) !important;
			border: 2px solid rgba(255, 255, 255, 0.3) !important;
			border-radius: 15px !important;
			padding: 8px 16px !important;
			font-size: 0.9rem !important;
			color: #e0e1dd !important;
			min-width: 160px !important;
			appearance: none;
			-webkit-appearance: none;
			-moz-appearance: none;
			background-image: url('data:image/svg+xml;utf8,<svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L6 6L11 1" stroke="%23e0e1dd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>') !important;
			background-repeat: no-repeat !important;
			background-position: right 12px center !important;
			background-size: 12px 7px !important;
			cursor: pointer !important;
			transition: all 0.3s ease !important;
			backdrop-filter: blur(10px) !important;
			position: relative;
			overflow: hidden;
		}

			.nav-dropdown::before {
				content: '';
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
				transition: left 0.6s ease;
			}

			.nav-dropdown:hover::before {
				left: 100%;
			}

			.nav-dropdown:hover {
				border-color: rgba(116, 185, 255, 0.6) !important;
				box-shadow: 0 0 15px rgba(116, 185, 255, 0.3) !important;
				transform: translateY(-2px);
			}

			.nav-dropdown:focus {
				border-color: rgba(116, 185, 255, 0.8) !important;
				box-shadow: 0 0 20px rgba(116, 185, 255, 0.5) !important;
				outline: none !important;
			}

		/* Botones del navbar */
		.btn-outline-light {
			background: rgba(255, 255, 255, 0.1) !important;
			color: rgba(255, 255, 255, 0.95) !important;
			border: 2px solid rgba(255, 255, 255, 0.4) !important;
			border-radius: 25px !important;
			padding: 0.6rem 1.5rem !important;
			font-weight: 600 !important;
			font-size: 0.9rem !important;
			transition: all 0.4s ease !important;
			text-decoration: none !important;
			backdrop-filter: blur(10px);
			position: relative;
			overflow: hidden;
			white-space: nowrap;
		}

			.btn-outline-light::before {
				content: '';
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
				transition: left 0.6s ease;
			}

			.btn-outline-light:hover::before {
				left: 100%;
			}

			.btn-outline-light:hover {
				background: rgba(255, 255, 255, 0.2) !important;
				border-color: rgba(255, 255, 255, 0.8) !important;
				color: white !important;
				transform: translateY(-2px);
				box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
			}

			.btn-outline-light i {
				margin-right: 0.5rem;
				font-size: 1rem;
			}

		/* Contenedor principal */
		.container.body-content {
			background: transparent;
			max-width: 1600px;
			margin: 0 auto;
			padding: 3rem 2rem;
		}

		/* Footer mejorado */
		footer {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border-radius: 25px;
			padding: 3rem;
			margin-top: 4rem;
			border: 1px solid rgba(255, 255, 255, 0.2);
			color: white;
		}

			footer p {
				margin-bottom: 1rem;
				font-size: 1.1rem;
			}

			footer a {
				color: #74b9ff;
				text-decoration: none;
				font-weight: 500;
				transition: all 0.3s ease;
				display: inline-flex;
				align-items: center;
				gap: 0.8rem;
				padding: 0.8rem 1.5rem;
				background: rgba(255, 255, 255, 0.1);
				border-radius: 25px;
				margin: 0.5rem;
			}

				footer a:hover {
					color: #ffffff;
					transform: translateY(-3px);
					text-shadow: 0 0 10px rgba(116, 185, 255, 0.5);
					background: rgba(255, 255, 255, 0.2);
					box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
				}

			footer i {
				font-size: 1.3rem;
			}

		/* HR personalizado */
		hr {
			border: none;
			height: 2px;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
			margin: 3rem 0;
		}

		/* Animación de aparición del navbar */
		.navbar {
			animation: slideDownImproved 0.8s ease-out;
		}

		@@keyframes slideDownImproved {
			from {
				transform: translateY(-100%%);
				opacity: 0;
				backdrop-filter: blur(0px);
			}

			to {
				transform: translateY(0);
				opacity: 1;
				backdrop-filter: blur(20px);
			}
		}

		/* Responsive mejorado */
		@@media (max-width: 991px) {
			.navbar {
				padding: 1rem 0 !important;
			}

				.navbar .container-fluid {
					padding: 0 1.5rem;
					flex-wrap: wrap;
					gap: 1rem;
				}

			.navbar-left {
				flex: 1 1 100%;
				justify-content: center;
				order: 1;
			}

			.navbar-center-left {
				flex: 1 1 50%;
				margin: 0;
				order: 2;
				justify-content: center;
			}

			.navbar-center-right {
				flex: 1 1 50%;
				margin: 0;
				order: 3;
				justify-content: center;
			}

			.navbar-right {
				flex: 1 1 100%;
				margin: 0;
				order: 4;
				justify-content: center;
			}

			.navbar-brand {
				font-size: 1.6rem !important;
			}

			.navbar img {
				height: 40px !important;
			}

			.navbar-text {
				font-size: 0.85rem !important;
				padding: 0.5rem 1rem !important;
				text-align: center;
			}

			.nav-dropdown {
				min-width: 140px;
				font-size: 0.85rem !important;
				padding: 0.5rem 0.8rem !important;
			}

			.btn-outline-light {
				font-size: 0.85rem !important;
				padding: 0.5rem 1rem !important;
			}
		}

		@@media (max-width: 768px) {
			.navbar-brand {
				font-size: 1.4rem !important;
				letter-spacing: 0.5px;
			}

			.navbar img {
				height: 35px !important;
				margin-right: 0.8rem !important;
			}

			.container.body-content {
				padding: 2rem 1rem;
			}

			footer {
				padding: 2rem;
				text-align: center;
			}

			.navbar-center-left,
			.navbar-center-right,
			.navbar-right {
				flex: 1 1 100%;
			}

			.navbar-text {
				width: 100%;
				text-align: center;
			}

			.nav-dropdown {
				width: 100%;
			}

			.btn-outline-light {
				width: 100%;
				text-align: center;
			}
		}

		@@media (max-width: 576px) {
			.navbar {
				padding: 0.8rem 0 !important;
			}

			.navbar-brand {
				font-size: 1.2rem !important;
			}

			.navbar img {
				height: 30px !important;
				margin-right: 0.6rem !important;
			}

			.btn-outline-light {
				padding: 0.5rem 1.2rem !important;
				font-size: 0.85rem !important;
			}

			.navbar-text {
				padding: 0.5rem 1rem !important;
				font-size: 0.85rem !important;
			}

			.nav-dropdown {
				font-size: 0.85rem !important;
				padding: 0.5rem 1rem !important;
			}
		}
	</style>
</head>
<body>
	<!-- Función JavaScript para navegación -->
	<script>
		function navigateToPage(url) {
			if (url) {
				window.location.href = url;
			}
		}
	</script>

	<!-- NAVBAR PRINCIPAL MEJORADO -->
	<nav class="navbar navbar-expand-lg navbar-dark">
		<div class="container-fluid">
			<!-- ZONA 1: IZQUIERDA - LOGO + NOMBRE -->
			<div class="navbar-section navbar-left">
				<img src="@Url.Content("~/Assets/Radio.png")" alt="Logo Voz del Este" />
				@Html.ActionLink("Voz del Este FM", "Index", "Home", null, new { @class = "navbar-brand" })
			</div>

			@if (User.Identity.IsAuthenticated)
			{
				var role = Session["Role"] as string ?? "Sin rol";
				var permissions = Session["Permissions"] as List<string> ?? new List<string>();

				<!-- ZONA 2: CENTRO-IZQUIERDA - DROPDOWN -->
				<div class="navbar-section navbar-center-left">
					<select onchange="navigateToPage(this.value)" class="nav-dropdown">
						<option value="">Ir a...</option>
						@* Mostrar opciones basadas en permisos *@
						@if (permissions.Any(p => p.Contains("Client")))
						{
							<option value="@Url.Action("Index", "Clients")">Clients</option>
						}
						@if (permissions.Any(p => p.Contains("User")))
						{
							<option value="@Url.Action("Index", "Users")">Users</option>
						}
						@if (permissions.Any(p => p.Contains("Sponsor")))
						{
							<option value="@Url.Action("Index", "Sponsors")">Sponsors</option>
						}
						@if (permissions.Any(p => p.Contains("Program")))
						{
							<option value="@Url.Action("Index", "RadioPrograms")">Radio Programs</option>
						}
					</select>
				</div>

				<!-- ZONA 3: CENTRO-DERECHA - USUARIO -->
				<div class="navbar-section navbar-center-right">
					<span class="navbar-text">
						<i class="fas fa-user-circle me-2"></i>
						@User.Identity.Name <span style="opacity: 0.8;">(@role)</span>
					</span>
				</div>

				<!-- ZONA 4: DERECHA - BOTÓN SALIR -->
				<div class="navbar-section navbar-right">
					<a class="btn btn-outline-light" href="@Url.Action("Logout", "Account")">
						<i class="fas fa-sign-out-alt"></i> Salir
					</a>
				</div>
			}
			else
			{
				<!-- ZONA 4: DERECHA - BOTÓN LOGIN (cuando no está logueado) -->
				<div class="navbar-section navbar-right">
					<a class="btn btn-outline-light" href="@Url.Action("Login", "Account")" aria-label="Iniciar sesión">
						<i class="fas fa-sign-in-alt"></i> Entrar
					</a>
				</div>
			}
		</div>
	</nav>

	<!-- CUERPO PRINCIPAL -->
	<div class="container body-content mt-4">
		@RenderBody()

		<hr />

		<!-- FOOTER MEJORADO -->
		<footer class="text-center">
			<div>
				<p style="font-size: 1.3rem; margin-bottom: 1.5rem;">
					<i class="fas fa-radio me-3"></i>
					&copy; @DateTime.Now.Year - Radio Voz del Este FM
				</p>
				<p style="opacity: 0.9; margin-bottom: 2rem; font-size: 1.1rem;">
					🎵 Tu radio en Maldonado • Las 24 horas contigo 🎵
				</p>
			</div>

			<div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 2rem;">
				<a href="https://www.linkedin.com/in/francisco-p%C3%A9rez-666433272/" target="_blank">
					<i class="fab fa-linkedin"></i>
					Francisco Pérez
				</a>
				<a href="https://www.linkedin.com/in/luis-virriel/" target="_blank">
					<i class="fab fa-linkedin"></i>
					Luis Virriel
				</a>
			</div>
		</footer>
	</div>

	@Scripts.Render("~/bundles/jquery")
	@Scripts.Render("~/bundles/bootstrap")
	@RenderSection("scripts", required: false)

	<script>
		// Efectos adicionales para el layout
		document.addEventListener('DOMContentLoaded', function () {
			// Animación suave para el logo
			const logo = document.querySelector('.navbar img');
			if (logo) {
				logo.addEventListener('mouseenter', function () {
					this.style.transform = 'rotate(360deg) scale(1.15)';
					this.style.transition = 'transform 0.6s ease';
				});

				logo.addEventListener('mouseleave', function () {
					this.style.transform = 'rotate(0deg) scale(1)';
				});
			}

			// Efecto click para el navbar brand
			const navbarBrand = document.querySelector('.navbar-brand');
			if (navbarBrand) {
				navbarBrand.addEventListener('click', function (e) {
					this.style.transform = 'scale(0.95)';
					setTimeout(() => {
						this.style.transform = '';
					}, 150);
				});
			}

			// Efecto hover para el dropdown
			const dropdown = document.querySelector('.nav-dropdown');
			if (dropdown) {
				dropdown.addEventListener('focus', function () {
					this.style.transform = 'translateY(-2px)';
				});

				dropdown.addEventListener('blur', function () {
					this.style.transform = 'translateY(0)';
				});
			}
		});
	</script>
</body>
</html>